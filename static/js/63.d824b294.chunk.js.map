{"version":3,"file":"static/js/63.d824b294.chunk.js","mappings":"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","sources":["components/adjustPoint/styles.ts","components/adjustPoint/adjustPoint.tsx","components/card/card.tsx","data-access/apis.ts","data-access/useGetHeroProfile/index.ts","data-access/useGetHeros/index.ts","data-access/usePatchHeroProfile/index.ts","types/enums.ts","pages/hero/styles.ts","pages/hero/index.tsx"],"sourcesContent":["import Box from \"@mui/material/Box\";\nimport Typography from \"@mui/material/Typography\";\nimport styled from \"@mui/system/styled\";\n\nexport const AdjustPointContainerStyled = styled(Box)(() => ({\n  display: \"inline-flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n  gap: \"12px\",\n  width: \"100%\",\n}));\n\nexport const LabelStyled = styled(Typography)(() => ({\n  width: \"64px\",\n  marginRight: \"12px\",\n}));\n\nexport const ValueStyled = styled(Typography)(() => ({\n  width: \"60px\",\n  textAlign: \"center\",\n}));\n","import Button from \"@mui/material/Button\";\nimport Typography from \"@mui/material/Typography\";\nimport { FC } from \"react\";\nimport { AdjustPointContainerStyled, LabelStyled, ValueStyled } from \"./styles\";\n\nexport interface AdjustPointProps {\n  label: string;\n  value: number;\n  /**\n   * + 按鈕 disabled\n   */\n  addDisabled?: boolean;\n  /**\n   * - 按鈕 disabled\n   */\n  minusDisabled?: boolean;\n  onChange: (value: number) => void;\n}\n\n/**\n * 調整數值的元件，包含 +、- 按鈕與數值顯示\n */\nexport const AdjustPoint: FC<AdjustPointProps> = ({\n  label,\n  value,\n  addDisabled,\n  minusDisabled,\n  onChange,\n}: AdjustPointProps) => {\n  const handleAdd = () => {\n    onChange(value + 1);\n  };\n\n  const handleMinus = () => {\n    onChange(value - 1);\n  };\n\n  return (\n    <AdjustPointContainerStyled>\n      <LabelStyled variant=\"h5\">{label}</LabelStyled>\n      <Button variant=\"outlined\" onClick={handleAdd} disabled={addDisabled}>\n        <Typography variant=\"h5\">+</Typography>\n      </Button>\n      <ValueStyled variant=\"h5\">{value}</ValueStyled>\n      <Button variant=\"outlined\" onClick={handleMinus} disabled={minusDisabled}>\n        <Typography variant=\"h5\">-</Typography>\n      </Button>\n    </AdjustPointContainerStyled>\n  );\n};\nexport default AdjustPoint;\n","import { Card as MuiCard } from \"@mui/material\";\nimport CardActionArea from \"@mui/material/CardActionArea\";\nimport CardContent from \"@mui/material/CardContent\";\nimport CardMedia from \"@mui/material/CardMedia\";\nimport Typography from \"@mui/material/Typography\";\nimport { FC, memo } from \"react\";\n\nexport interface CardProps {\n  /**\n   * 圖片網址\n   */\n  img: string;\n  /**\n   * 標題\n   */\n  label: string;\n}\n\n/**\n * 卡片元件，包含一張圖片與標題\n */\nexport const Card: FC<CardProps> = ({ img, label }: CardProps) => {\n  return (\n    <MuiCard>\n      <CardActionArea>\n        <CardMedia component=\"img\" height=\"140\" image={img} alt={label} />\n        <CardContent>\n          <Typography gutterBottom variant=\"h5\" component=\"div\">\n            {label}\n          </Typography>\n        </CardContent>\n      </CardActionArea>\n    </MuiCard>\n  );\n};\nexport default memo(Card);\n","import axios from \"axios\";\nimport { Profile } from \"../types\";\nexport const getHeroList = async () => {\n  return axios\n    .get(\"https://hahow-recruit.herokuapp.com/heroes\")\n    .then((res) => res.data)\n    .catch((_) => ({}));\n};\n\nexport const getHeroProfile = async (id: string) => {\n  return axios\n    .get(`https://hahow-recruit.herokuapp.com/heroes/${id}/profile`)\n    .then((res) => res.data)\n    .catch((_) => ({}));\n};\n\nexport const patchHeroProfile = async (id: string, param: Profile) => {\n  return axios\n    .patch(`https://hahow-recruit.herokuapp.com/heroes/${id}/profile`, param)\n    .then((res) => res.data)\n    .catch((err) => ({\n      code: 400,\n      msg: err,\n    }));\n};\n","import { useQuery } from \"@tanstack/react-query\";\nimport { Profile } from \"../../types\";\nimport { getHeroProfile } from \"../apis\";\n\nexport const useGetHeroProfile = ({ id }: { id: string }) => {\n  return useQuery<Profile>({\n    queryKey: [\"heros-profile\", { id }],\n    queryFn: () => getHeroProfile(id),\n  });\n};\n","import { useQuery } from \"@tanstack/react-query\";\nimport { Hero } from \"../../types\";\nimport { getHeroList } from \"../apis\";\n\nexport const useGetHeros = () => {\n  return useQuery<Hero[]>({\n    queryKey: [\"heros\"],\n    queryFn: () => getHeroList(),\n  });\n};\n","import { useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"../../providers\";\nimport { Profile } from \"../../types\";\nimport { patchHeroProfile } from \"../apis\";\n\nexport const usePatchHeroProfile = (id: string) => {\n  return useMutation({\n    mutationKey: [\"patch-heros-profile\"],\n    mutationFn: (param: Profile) => patchHeroProfile(id, param),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"heros-profile\", { id }] });\n    },\n  });\n};\n","export enum PointEnum {\n  \"STR\" = \"str\",\n  \"INT\" = \"int\",\n  \"AGI\" = \"agi\",\n  \"LUK\" = \"luk\",\n}\n","import Box from \"@mui/material/Box\";\nimport Paper from \"@mui/material/Paper\";\nimport styled from \"@mui/system/styled\";\n\nexport const ContainerStyled = styled(Paper)(() => ({\n  display: \"inline-flex\",\n  minWidth: \"656px\",\n  padding: \"12px\",\n}));\n\nexport const AdjustPointWrapperStyled = styled(Box)(() => ({\n  display: \"flex\",\n  flexDirection: \"column\",\n  gap: \"12px\",\n}));\n\nexport const RightWrapperStyled = styled(Box)(() => ({\n  display: \"flex\",\n  justifyContent: \"flex-end\",\n  flexGrow: 1,\n}));\n\nexport const SubmitWrapperStyled = styled(Box)(() => ({\n  display: \"flex\",\n  flexDirection: \"column\",\n  gap: \"12px\",\n  justifyContent: \"flex-end\",\n  width: \"160px\",\n}));\n","import { Typography } from \"@mui/material\";\nimport Button from \"@mui/material/Button\";\nimport { FC, useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { AdjustPoint } from \"../../components\";\nimport { useGetHeroProfile, usePatchHeroProfile } from \"../../data-access\";\nimport { PointEnum, Profile } from \"../../types\";\nimport {\n  AdjustPointWrapperStyled,\n  ContainerStyled,\n  RightWrapperStyled,\n  SubmitWrapperStyled,\n} from \"./styles\";\n\nexport const Hero: FC = () => {\n  const { heroId } = useParams();\n  const {\n    data: profile,\n    isFetched,\n    isFetching,\n  } = useGetHeroProfile({ id: heroId || \"\" });\n  const { mutate: saveProfile, isPending: isUpdating } = usePatchHeroProfile(\n    heroId || \"\"\n  );\n\n  // 暫存的資料，用於計算剩餘點數與儲存\n  const [tempData, setTempData] = useState<Profile>({\n    str: 0,\n    int: 0,\n    agi: 0,\n    luk: 0,\n  });\n\n  const { pointsLeft, isUpdated } = useMemo(() => {\n    if (!profile || !tempData) return { pointsLeft: 0, isUpdated: false };\n\n    // 資料庫總數值\n    const amount = profile?.str + profile?.int + profile?.agi + profile?.luk;\n\n    // 已分配總數值\n    const tempDataAmount =\n      tempData?.str + tempData?.int + tempData?.agi + tempData?.luk;\n\n    // 檢查是否有更動\n    const isUpdated =\n      profile.str !== tempData.str ||\n      profile.int !== tempData.int ||\n      profile.agi !== tempData.agi ||\n      profile.luk !== tempData.luk;\n\n    // 計算尚未分配的數值\n    return { pointsLeft: amount - tempDataAmount, isUpdated };\n  }, [tempData, profile]);\n\n  const handlePointChange = useCallback((type: PointEnum, value: number) => {\n    setTempData((prev) => {\n      return {\n        ...prev,\n        [type]: value,\n      };\n    });\n  }, []);\n\n  const handleSubmit = useCallback(() => {\n    saveProfile(tempData, {\n      onSuccess: () => {\n        toast.success(\"儲存成功\");\n      },\n      onError: () => {\n        toast.error(\"儲存失敗\");\n      },\n    });\n  }, [saveProfile, tempData]);\n\n  useEffect(() => {\n    if (isFetched && profile) {\n      setTempData(profile);\n    }\n  }, [isFetched, profile]);\n\n  return (\n    <ContainerStyled>\n      <AdjustPointWrapperStyled>\n        <AdjustPoint\n          value={tempData.str}\n          onChange={(val: number) => handlePointChange(PointEnum.STR, val)}\n          label={PointEnum.STR}\n          minusDisabled={tempData.str <= 0}\n          addDisabled={pointsLeft <= 0}\n        />\n        <AdjustPoint\n          value={tempData.int}\n          onChange={(val: number) => handlePointChange(PointEnum.INT, val)}\n          label={PointEnum.INT}\n          minusDisabled={tempData.int <= 0}\n          addDisabled={pointsLeft <= 0}\n        />\n        <AdjustPoint\n          value={tempData.agi}\n          onChange={(val: number) => handlePointChange(PointEnum.AGI, val)}\n          label={PointEnum.AGI}\n          minusDisabled={tempData.agi <= 0}\n          addDisabled={pointsLeft <= 0}\n        />\n        <AdjustPoint\n          value={tempData.luk}\n          onChange={(val: number) => handlePointChange(PointEnum.LUK, val)}\n          label={PointEnum.LUK}\n          minusDisabled={tempData.luk <= 0}\n          addDisabled={pointsLeft <= 0}\n        />\n      </AdjustPointWrapperStyled>\n      <RightWrapperStyled>\n        <SubmitWrapperStyled>\n          <Typography>剩餘點數: {pointsLeft}</Typography>\n          <Button\n            onClick={handleSubmit}\n            disabled={pointsLeft > 0 || !isUpdated || isUpdating || isFetching}\n            variant=\"contained\"\n          >\n            儲存\n          </Button>\n        </SubmitWrapperStyled>\n      </RightWrapperStyled>\n    </ContainerStyled>\n  );\n};\n"],"names":["AdjustPointContainerStyled","styled","Box","display","justifyContent","alignItems","gap","width","LabelStyled","Typography","marginRight","ValueStyled","textAlign","AdjustPoint","_ref","label","value","addDisabled","minusDisabled","onChange","_jsxs","children","_jsx","variant","Button","onClick","handleAdd","disabled","handleMinus","Card","img","MuiCard","CardActionArea","CardMedia","component","height","image","alt","CardContent","gutterBottom","useGetHeroProfile","id","useQuery","queryKey","queryFn","async","axios","get","concat","then","res","data","catch","_","getHeroProfile","useGetHeros","getHeroList","usePatchHeroProfile","useMutation","mutationKey","mutationFn","param","patch","err","code","msg","patchHeroProfile","onSuccess","queryClient","invalidateQueries","PointEnum","ContainerStyled","Paper","minWidth","padding","AdjustPointWrapperStyled","flexDirection","RightWrapperStyled","flexGrow","SubmitWrapperStyled","Hero","heroId","useParams","profile","isFetched","isFetching","mutate","saveProfile","isPending","isUpdating","tempData","setTempData","useState","str","int","agi","luk","pointsLeft","isUpdated","useMemo","handlePointChange","useCallback","type","prev","handleSubmit","toast","success","onError","error","useEffect","val","STR","INT","AGI","LUK"],"sourceRoot":""}